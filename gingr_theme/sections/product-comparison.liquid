{%- comment -%}
  GINGR — Product Comparison Table
  Side-by-side comparison of shots: ingredients, benefits, when to drink.
  Helps users pick the right product — drives conversion.
{%- endcomment -%}

<section class="section-padding" data-section-id="{{ section.id }}">
  <div class="gingr-container">
    <div class="text-center mb-12">
      {% if section.settings.eyebrow != blank %}
        <p class="text-xs font-bold uppercase tracking-[0.2em] text-subheading mb-3">{{ section.settings.eyebrow }}</p>
      {% endif %}
      <h2 class="text-3xl md:text-4xl font-bold">{{ section.settings.heading }}</h2>
      {% if section.settings.subheading != blank %}
        <p class="text-base text-subheading mt-3 max-w-lg mx-auto">{{ section.settings.subheading }}</p>
      {% endif %}
    </div>

    {%- comment -%} Scrollable table on mobile {%- endcomment -%}
    <div class="overflow-x-auto -mx-4 px-4">
      <table class="w-full min-w-[640px] border-collapse">
        <thead>
          <tr>
            <th class="text-left p-4 text-xs font-bold uppercase tracking-wider text-subheading w-40"></th>
            {% for block in section.blocks %}
              <th class="p-4 text-center" {{ block.shopify_attributes }}>
                {% if block.settings.image %}
                  <div class="w-16 h-16 mx-auto mb-3 rounded-xl overflow-hidden"
                       {% if block.settings.color != blank %}style="background: {{ block.settings.color }};"{% endif %}>
                    {{ block.settings.image | image_url: width: 128 | image_tag:
                      class: 'w-full h-full object-contain p-1',
                      loading: 'lazy'
                    }}
                  </div>
                {% endif %}
                <p class="text-sm font-bold">{{ block.settings.name }}</p>
                {% if block.settings.tagline != blank %}
                  <p class="text-xs text-subheading mt-0.5">{{ block.settings.tagline }}</p>
                {% endif %}
              </th>
            {% endfor %}
          </tr>
        </thead>
        <tbody>
          {%- comment -%} Row: Key ingredient {%- endcomment -%}
          <tr class="border-t border-white/5">
            <td class="p-4 text-xs font-semibold text-subheading uppercase tracking-wider">Key ingredient</td>
            {% for block in section.blocks %}
              <td class="p-4 text-center text-sm">{{ block.settings.ingredient }}</td>
            {% endfor %}
          </tr>
          {%- comment -%} Row: Benefit {%- endcomment -%}
          <tr class="border-t border-white/5">
            <td class="p-4 text-xs font-semibold text-subheading uppercase tracking-wider">Main benefit</td>
            {% for block in section.blocks %}
              <td class="p-4 text-center text-sm">{{ block.settings.benefit }}</td>
            {% endfor %}
          </tr>
          {%- comment -%} Row: Best for {%- endcomment -%}
          <tr class="border-t border-white/5">
            <td class="p-4 text-xs font-semibold text-subheading uppercase tracking-wider">Best for</td>
            {% for block in section.blocks %}
              <td class="p-4 text-center text-sm">{{ block.settings.best_for }}</td>
            {% endfor %}
          </tr>
          {%- comment -%} Row: When to drink {%- endcomment -%}
          <tr class="border-t border-white/5">
            <td class="p-4 text-xs font-semibold text-subheading uppercase tracking-wider">When</td>
            {% for block in section.blocks %}
              <td class="p-4 text-center text-sm">{{ block.settings.when }}</td>
            {% endfor %}
          </tr>
          {%- comment -%} Row: CTA {%- endcomment -%}
          <tr class="border-t border-white/5">
            <td class="p-4"></td>
            {% for block in section.blocks %}
              <td class="p-4 text-center">
                {% if block.settings.link != blank %}
                  <a href="{{ block.settings.link }}" class="inline-flex items-center justify-center px-4 py-2 rounded-lg text-xs font-bold bg-white/10 hover:bg-white/20 transition-all border border-white/10 no-underline">
                    {{ block.settings.cta | default: 'Shop' }}
                  </a>
                {% endif %}
              </td>
            {% endfor %}
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</section>

{% schema %}
{
  "name": "Product comparison",
  "tag": "section",
  "settings": [
    {
      "type": "text",
      "id": "eyebrow",
      "label": "Eyebrow text",
      "default": "Find your shot"
    },
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Which shot is right for you?"
    },
    {
      "type": "text",
      "id": "subheading",
      "label": "Subheading",
      "default": "Compare our range and find your perfect daily shot."
    }
  ],
  "blocks": [
    {
      "type": "product_col",
      "name": "Product column",
      "settings": [
        {
          "type": "text",
          "id": "name",
          "label": "Product name",
          "default": "GINGR ENERGY"
        },
        {
          "type": "text",
          "id": "tagline",
          "label": "Tagline",
          "default": "Clean energy"
        },
        {
          "type": "image_picker",
          "id": "image",
          "label": "Product image"
        },
        {
          "type": "color",
          "id": "color",
          "label": "Image background color"
        },
        {
          "type": "text",
          "id": "ingredient",
          "label": "Key ingredient",
          "default": "Guarana"
        },
        {
          "type": "text",
          "id": "benefit",
          "label": "Main benefit",
          "default": "Natural energy boost"
        },
        {
          "type": "text",
          "id": "best_for",
          "label": "Best for",
          "default": "Morning fatigue"
        },
        {
          "type": "text",
          "id": "when",
          "label": "When to drink",
          "default": "Morning"
        },
        {
          "type": "url",
          "id": "link",
          "label": "Product link"
        },
        {
          "type": "text",
          "id": "cta",
          "label": "Button text",
          "default": "Shop"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Product comparison",
      "blocks": [
        { "type": "product_col", "settings": { "name": "ENERGY", "tagline": "Clean energy", "ingredient": "Guarana", "benefit": "Natural energy boost", "best_for": "Morning fatigue", "when": "Morning" }},
        { "type": "product_col", "settings": { "name": "IMMUNITY", "tagline": "Daily defense", "ingredient": "Turmeric + Vit C", "benefit": "Immune support", "best_for": "Staying healthy", "when": "Any time" }},
        { "type": "product_col", "settings": { "name": "FOCUS", "tagline": "Clarity", "ingredient": "Ginseng + Matcha", "benefit": "Mental clarity", "best_for": "Work sessions", "when": "Before work" }},
        { "type": "product_col", "settings": { "name": "DIGEST", "tagline": "Gut health", "ingredient": "Apple Cider + Fennel", "benefit": "Better digestion", "best_for": "After meals", "when": "After eating" }},
        { "type": "product_col", "settings": { "name": "RECOVER", "tagline": "Recovery", "ingredient": "Beetroot + Magnesium", "benefit": "Faster recovery", "best_for": "Post-workout", "when": "After training" }}
      ]
    }
  ]
}
{% endschema %}
