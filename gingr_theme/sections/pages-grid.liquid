{%- comment -%}
  Pages Grid
  Card grid above footer to showcase page sections / links.
{%- endcomment -%}

<section class="section-padding" data-section-id="{{ section.id }}">
  <div class="gingr-container">
    {% if section.settings.heading != blank %}
      <div class="text-center mb-12">
        {% if section.settings.eyebrow != blank %}
          <p class="text-xs font-bold uppercase tracking-[0.2em] text-subheading mb-3">{{ section.settings.eyebrow }}</p>
        {% endif %}
        <h2 class="text-3xl md:text-4xl font-bold">{{ section.settings.heading }}</h2>
        {% if section.settings.subheading != blank %}
          <p class="text-base text-subheading mt-3 max-w-lg mx-auto">{{ section.settings.subheading }}</p>
        {% endif %}
      </div>
    {% endif %}

    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-{{ section.settings.columns | default: 3 }} gap-5">
      {% for block in section.blocks %}
        <a
          href="{{ block.settings.link }}"
          class="group relative rounded-2xl overflow-hidden border border-white/10 bg-white/5 backdrop-blur-sm transition-all duration-300 hover:border-white/20 hover:bg-white/10 hover:scale-[1.02] no-underline block"
          {{ block.shopify_attributes }}
        >
          {%- comment -%} Card image {%- endcomment -%}
          {% if block.settings.image %}
            <div class="aspect-[16/10] overflow-hidden">
              {{ block.settings.image | image_url: width: 600 | image_tag:
                class: 'w-full h-full object-cover group-hover:scale-105 transition-transform duration-500',
                loading: 'lazy',
                widths: '300,400,600'
              }}
            </div>
          {% else %}
            <div class="aspect-[16/10] bg-white/5 flex items-center justify-center">
              <svg class="w-12 h-12 text-white/10" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1" d="m2.25 15.75 5.159-5.159a2.25 2.25 0 0 1 3.182 0l5.159 5.159m-1.5-1.5 1.409-1.409a2.25 2.25 0 0 1 3.182 0l2.909 2.909M3.75 21h16.5A2.25 2.25 0 0 0 22.5 18.75V5.25A2.25 2.25 0 0 0 20.25 3H3.75A2.25 2.25 0 0 0 1.5 5.25v13.5A2.25 2.25 0 0 0 3.75 21Z"/></svg>
            </div>
          {% endif %}

          {%- comment -%} Card content {%- endcomment -%}
          <div class="p-5 md:p-6">
            <h3 class="text-lg font-bold transition-colors" style="--hover-color:var(--color-accent);">
              {{ block.settings.title }}
            </h3>
            {% if block.settings.description != blank %}
              <p class="text-sm text-subheading mt-2 leading-relaxed line-clamp-2">
                {{ block.settings.description }}
              </p>
            {% endif %}

            <div class="flex items-center gap-2 mt-4 text-sm font-semibold text-subheading transition-colors">
              <span>{{ block.settings.cta_text | default: 'Explore' }}</span>
              <svg class="w-4 h-4 transform group-hover:translate-x-1 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.5 4.5 21 12m0 0-7.5 7.5M21 12H3"/></svg>
            </div>
          </div>
        </a>
      {% endfor %}
    </div>
  </div>
</section>

{% schema %}
{
  "name": "Pages grid",
  "tag": "section",
  "settings": [
    {
      "type": "text",
      "id": "eyebrow",
      "label": "Eyebrow text"
    },
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Explore GINGR"
    },
    {
      "type": "text",
      "id": "subheading",
      "label": "Subheading"
    },
    {
      "type": "select",
      "id": "columns",
      "label": "Columns (desktop)",
      "options": [
        { "value": "2", "label": "2" },
        { "value": "3", "label": "3" },
        { "value": "4", "label": "4" }
      ],
      "default": "3"
    }
  ],
  "blocks": [
    {
      "type": "page_card",
      "name": "Page card",
      "settings": [
        {
          "type": "text",
          "id": "title",
          "label": "Title",
          "default": "Our story"
        },
        {
          "type": "textarea",
          "id": "description",
          "label": "Short description",
          "default": "Learn about our mission and how we source the best ginger."
        },
        {
          "type": "image_picker",
          "id": "image",
          "label": "Image"
        },
        {
          "type": "url",
          "id": "link",
          "label": "Link"
        },
        {
          "type": "text",
          "id": "cta_text",
          "label": "Link text",
          "default": "Explore"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Pages grid",
      "blocks": [
        {
          "type": "page_card",
          "settings": {
            "title": "Our story",
            "description": "Learn how GINGR started and why we do what we do."
          }
        },
        {
          "type": "page_card",
          "settings": {
            "title": "The ingredients",
            "description": "What goes inside every shot â€” and nothing else."
          }
        },
        {
          "type": "page_card",
          "settings": {
            "title": "Subscribe & save",
            "description": "Get your daily shots delivered. Save 15% on every order."
          }
        }
      ]
    }
  ]
}
{% endschema %}
