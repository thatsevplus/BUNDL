{%- comment -%}
  Renders a product price with optional compare-at price.
  Usage: {% render 'price', product: product, variant: variant %}
{%- endcomment -%}

{%- liquid
  assign target = variant | default: product.selected_or_first_available_variant | default: product
  assign price = target.price
  assign compare_at = target.compare_at_price
-%}

<div class="flex items-center gap-2 flex-wrap">
  <span class="text-lg font-bold text-gingr-navy">
    {{ price | money }}
  </span>
  {% if compare_at and compare_at > price %}
    <span class="text-sm text-gray-400 line-through">
      {{ compare_at | money }}
    </span>
    <span class="gingr-badge bg-gingr-yellow text-gingr-navy">
      {%- assign savings = compare_at | minus: price | times: 100 | divided_by: compare_at -%}
      -{{ savings }}%
    </span>
  {% endif %}
</div>
