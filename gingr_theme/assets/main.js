(()=>{var h={drawer:null,overlay:null,init(){this.drawer=document.getElementById("cart-drawer"),this.overlay=document.getElementById("cart-drawer-overlay"),this.drawer&&(document.querySelectorAll("[data-cart-toggle]").forEach(e=>{e.addEventListener("click",t=>{t.preventDefault(),this.open()})}),this.overlay?.addEventListener("click",()=>this.close()),this.drawer.querySelector("[data-cart-close]")?.addEventListener("click",()=>this.close()),document.addEventListener("keydown",e=>{e.key==="Escape"&&this.isOpen()&&this.close()}),document.addEventListener("submit",e=>{let t=e.target.closest('form[action*="/cart/add"]');t&&(e.preventDefault(),this.addToCart(t))}),this.drawer.addEventListener("click",e=>{let t=e.target.closest("[data-cart-qty]");if(t){e.preventDefault();let r=t.dataset.lineKey,s=t.dataset.cartQty,a=this.drawer.querySelector(`[data-qty-input="${r}"]`),o=parseInt(a?.value||"1",10);s==="plus"&&o++,s==="minus"&&(o=Math.max(0,o-1)),this.updateLine(r,o)}}))},isOpen(){return this.drawer?.classList.contains("translate-x-0")},open(){this.drawer.classList.remove("translate-x-full"),this.drawer.classList.add("translate-x-0"),this.overlay.classList.remove("hidden"),document.documentElement.style.overflow="hidden",this.drawer.querySelector("[data-cart-close]")?.focus()},close(){this.drawer.classList.add("translate-x-full"),this.drawer.classList.remove("translate-x-0"),this.overlay.classList.add("hidden"),document.documentElement.style.overflow=""},async addToCart(e){let t=new FormData(e),r=e.querySelector('[type="submit"]');r&&(r.disabled=!0,r.textContent="Adding\u2026");try{if(!(await fetch("/cart/add.js",{method:"POST",body:t})).ok)throw new Error("Add to cart failed");await this.refreshDrawer(),this.open()}catch(s){console.error("[GINGR Cart]",s)}finally{r&&(r.disabled=!1,r.textContent="Add")}},async updateLine(e,t){try{if(!(await fetch("/cart/change.js",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e,quantity:t})})).ok)throw new Error("Update failed");await this.refreshDrawer()}catch(r){console.error("[GINGR Cart]",r)}},async refreshDrawer(){try{let t=await(await fetch("/?section_id=cart-drawer")).text(),r=new DOMParser().parseFromString(t,"text/html"),s=r.querySelector("#cart-drawer-content");s&&(this.drawer.querySelector("#cart-drawer-content").innerHTML=s.innerHTML);let a=r.querySelector("#cart-drawer .border-t.border-white\\/10"),o=this.drawer.querySelector(".border-t.border-white\\/10:last-child");a&&o&&(o.innerHTML=a.innerHTML),r.querySelectorAll("[data-cart-count]").forEach(n=>{let c=n.textContent.trim();document.querySelectorAll("[data-cart-count]").forEach(l=>{l.textContent=c,l.classList.toggle("hidden",c===""||c==="0")})})}catch(e){console.error("[GINGR Cart refresh]",e)}}};var f={init(){document.querySelectorAll("[data-bundle-selector]").forEach(e=>{this.setup(e)})},setup(e){let t=e.querySelectorAll("[data-bundle-option]"),r=e.closest("form")?.querySelector('select[name="id"], input[name="id"]'),s=document.querySelector("[data-bundle-price]"),a=document.querySelector("[data-bundle-savings]"),o=document.querySelector("[data-bundle-unit-price]");t.forEach(i=>{i.addEventListener("click",()=>{t.forEach(c=>{c.classList.remove("bg-gingr-navy","text-white","ring-2","ring-gingr-navy"),c.classList.add("bg-white","text-gingr-navy")}),i.classList.add("bg-gingr-navy","text-white","ring-2","ring-gingr-navy"),i.classList.remove("bg-white","text-gingr-navy");let n=i.dataset.variantId;if(r&&(r.tagName,r.value=n,r.dispatchEvent(new Event("change",{bubbles:!0}))),s&&(s.textContent=i.dataset.price),a){let c=i.dataset.savings;a.textContent=c&&c!=="0"?`Save ${c}%`:"",a.classList.toggle("hidden",!c||c==="0")}o&&i.dataset.unitPrice&&(o.textContent=i.dataset.unitPrice)})})}};var m={init(){document.querySelectorAll("[data-sub-builder]").forEach(e=>{let t=e.querySelector('[data-purchase-type="onetime"]'),r=e.querySelector('[data-purchase-type="subscribe"]'),s=e.querySelector("[data-frequency-panel]"),a=e.querySelectorAll("[data-frequency-option]");if(!t||!r)return;let o=i=>{i==="subscribe"?(r.classList.add("border-gingr-yellow","bg-gingr-yellow/10","text-gingr-yellow"),r.classList.remove("border-white/10","text-white/50"),t.classList.remove("border-gingr-yellow","bg-gingr-yellow/10","text-gingr-yellow"),t.classList.add("border-white/10","text-white/50"),s&&(s.style.display="")):(t.classList.add("border-gingr-yellow","bg-gingr-yellow/10","text-gingr-yellow"),t.classList.remove("border-white/10","text-white/50"),r.classList.remove("border-gingr-yellow","bg-gingr-yellow/10","text-gingr-yellow"),r.classList.add("border-white/10","text-white/50"),s&&(s.style.display="none"))};t.addEventListener("click",()=>o("onetime")),r.addEventListener("click",()=>o("subscribe")),a.forEach(i=>{i.addEventListener("click",()=>{a.forEach(c=>{c.classList.remove("border-gingr-yellow","bg-gingr-yellow/5"),c.classList.add("border-white/10");let l=c.querySelector("[data-frequency-radio]");l&&(l.classList.remove("border-gingr-yellow"),l.classList.add("border-white/20"),l.innerHTML="")}),i.classList.add("border-gingr-yellow","bg-gingr-yellow/5"),i.classList.remove("border-white/10");let n=i.querySelector("[data-frequency-radio]");n&&(n.classList.add("border-gingr-yellow"),n.classList.remove("border-white/20"),n.innerHTML='<div class="w-2 h-2 rounded-full bg-gingr-yellow"></div>')})})})}};var p={init(){this.setupFocusVisible()},setupFocusVisible(){document.addEventListener("keydown",e=>{e.key==="Tab"&&document.body.classList.add("keyboard-nav")}),document.addEventListener("mousedown",()=>{document.body.classList.remove("keyboard-nav")})},trapFocus(e){let t=e.querySelectorAll('a[href], button:not([disabled]), input:not([disabled]), select:not([disabled]), textarea:not([disabled]), [tabindex]:not([tabindex="-1"])');if(t.length===0)return;let r=t[0],s=t[t.length-1];function a(o){o.key==="Tab"&&(o.shiftKey?document.activeElement===r&&(o.preventDefault(),s.focus()):document.activeElement===s&&(o.preventDefault(),r.focus()))}return e.addEventListener("keydown",a),r.focus(),()=>e.removeEventListener("keydown",a)}};var g={init(){document.querySelectorAll("[data-product-carousel]").forEach(e=>{this.setup(e)})},setup(e){let t=e.querySelector("[data-carousel-track]"),r=e.querySelectorAll(".carousel-slide"),s=e.querySelector("[data-carousel-prev]"),a=e.querySelector("[data-carousel-next]"),o=e.querySelectorAll("[data-carousel-dot]"),i=0;if(!t||r.length===0)return;let n=d=>{let u=r[0].offsetWidth+24;t.scrollTo({left:u*d,behavior:"smooth"})},c=()=>{o.forEach((d,u)=>{u===i?(d.classList.add("bg-gingr-navy","w-6"),d.classList.remove("bg-gingr-navy/20","w-2")):(d.classList.remove("bg-gingr-navy","w-6"),d.classList.add("bg-gingr-navy/20","w-2"))})};s?.addEventListener("click",()=>{i=Math.max(0,i-1),n(i),c()}),a?.addEventListener("click",()=>{i=Math.min(r.length-1,i+1),n(i),c()}),o.forEach(d=>{d.addEventListener("click",()=>{i=parseInt(d.dataset.carouselDot,10),n(i),c()})});let l=null;t.addEventListener("scroll",()=>{clearTimeout(l),l=setTimeout(()=>{let d=r[0].offsetWidth+24,u=Math.round(t.scrollLeft/d);u!==i&&(i=u,c())},100)},{passive:!0})}};var b={init(){let e=document.querySelector("[data-header]");if(!e)return;let t=50,r=!1,s=()=>{window.scrollY>t?e.classList.add("is-scrolled"):e.classList.remove("is-scrolled"),r=!1};window.addEventListener("scroll",()=>{r||(requestAnimationFrame(s),r=!0)},{passive:!0}),s()}},v={init(){let e=document.querySelector("[data-best-seller-promo]");if(!e)return;let t=e.getAttribute("data-dismissed-key");if(sessionStorage.getItem(t)){e.style.display="none";return}let r=e.querySelector("[data-promo-dismiss]");r&&r.addEventListener("click",()=>{try{sessionStorage.setItem(t,"1")}catch{}e.style.display="none"})}},w={init(){let e=document.querySelector("[data-back-to-top]");if(!e)return;let t=500,r=!1,s=()=>{let a=window.scrollY>t;e.style.opacity=a?"1":"0",e.style.pointerEvents=a?"auto":"none",r=!1};window.addEventListener("scroll",()=>{r||(requestAnimationFrame(s),r=!0)},{passive:!0}),s(),e.addEventListener("click",()=>{window.scrollTo({top:0,behavior:"smooth"})})}};var L={init(){document.querySelectorAll("[data-info-tabs]").forEach(e=>{let t=e.querySelectorAll("[data-tab-trigger]"),r=e.querySelectorAll("[data-tab-panel]");if(!t.length||!r.length)return;let s=0,a=n=>{n.style.backgroundColor=n.dataset.tabActiveBg,n.style.color=n.dataset.tabActiveText},o=n=>{n.style.backgroundColor=n.dataset.tabInactiveBg,n.style.color=n.dataset.tabInactiveText},i=n=>{if(n===s)return;o(t[s]),t[s].setAttribute("aria-selected","false");let c=r[s];c.classList.add("hidden"),c.classList.remove("block","opacity-100","translate-y-0"),a(t[n]),t[n].setAttribute("aria-selected","true");let l=r[n];l.classList.remove("hidden"),l.classList.add("opacity-0","translate-y-4"),requestAnimationFrame(()=>{requestAnimationFrame(()=>{l.classList.remove("opacity-0","translate-y-4"),l.classList.add("opacity-100","translate-y-0")})}),s=n};t.forEach(n=>{n.addEventListener("click",()=>{let c=parseInt(n.getAttribute("data-tab-trigger"),10);i(c)})})})}};var x={init(){document.querySelectorAll("[data-bundle-select]").forEach(e=>{let t=e.querySelector("[data-bundle-select-toggle]"),r=e.querySelector("[data-bundle-select-dropdown]"),s=e.querySelector("[data-bundle-select-chevron]"),a=e.querySelector("[data-bundle-select-label]"),o=e.querySelectorAll("[data-bundle-option]");!t||!r||(t.addEventListener("click",i=>{i.stopPropagation();let n=!r.classList.contains("hidden");if(document.querySelectorAll("[data-bundle-product]").forEach(c=>{c.style.zIndex=""}),document.querySelectorAll("[data-bundle-select-dropdown]").forEach(c=>{c.classList.add("hidden")}),document.querySelectorAll("[data-bundle-select-chevron]").forEach(c=>{c.style.transform=""}),n)t.setAttribute("aria-expanded","false");else{let c=e.closest("[data-bundle-product]");c&&(c.style.zIndex="40"),r.classList.remove("hidden"),s&&(s.style.transform="rotate(180deg)"),t.setAttribute("aria-expanded","true")}}),o.forEach(i=>{i.addEventListener("click",()=>{let n=i.getAttribute("data-amount");a&&(a.textContent="Pack "+n),r.classList.add("hidden"),s&&(s.style.transform=""),t.setAttribute("aria-expanded","false"),o.forEach(c=>c.classList.remove("bg-white/10")),i.classList.add("bg-white/10")})}))}),document.addEventListener("click",()=>{document.querySelectorAll("[data-bundle-product]").forEach(e=>{e.style.zIndex=""}),document.querySelectorAll("[data-bundle-select-dropdown]").forEach(e=>{e.classList.add("hidden")}),document.querySelectorAll("[data-bundle-select-chevron]").forEach(e=>{e.style.transform=""})})}};var E={init(){let e=document.querySelector("[data-mobile-menu-toggle]"),t=document.querySelector("[data-mobile-menu-close]"),r=document.querySelector("[data-mobile-menu]");if(!r)return;let s=()=>{r.classList.remove("hidden"),r.classList.add("flex"),document.body.style.overflow="hidden",e&&e.setAttribute("aria-expanded","true")},a=()=>{r.classList.add("hidden"),r.classList.remove("flex"),document.body.style.overflow="",e&&e.setAttribute("aria-expanded","false")};e&&e.addEventListener("click",s),t&&t.addEventListener("click",a),r.querySelectorAll("a").forEach(o=>{o.addEventListener("click",a)}),document.addEventListener("keydown",o=>{o.key==="Escape"&&!r.classList.contains("hidden")&&a()})}};function q(){return window.Shopify&&window.Shopify.routes&&window.Shopify.routes.root||"/"}function A(e){if(!e||!e.results)return"";let{products:t=[],pages:r=[],queries:s=[]}=e.results,a=[];return t.length>0&&(a.push('<p class="px-3 py-1 text-xs font-semibold uppercase text-white/50">Products</p>'),t.slice(0,5).forEach(o=>{let i=o.url||"#",n=o.image?`<img src="${o.image}" alt="" class="w-10 h-10 object-cover rounded" loading="lazy">`:"";a.push(`<a href="${i}" class="flex items-center gap-3 px-3 py-2 hover:bg-white/10 text-body no-underline" role="option">${n}<span>${y(o.title)}</span> <span class="text-subheading text-sm ml-auto">${k(o.price)}</span></a>`)})),r.length>0&&(a.push('<p class="px-3 py-1 text-xs font-semibold uppercase text-white/50 mt-2">Pages</p>'),r.slice(0,3).forEach(o=>{a.push(`<a href="${o.url||"#"}" class="block px-3 py-2 hover:bg-white/10 text-body no-underline" role="option">${y(o.title)}</a>`)})),s.length>0&&(a.push('<p class="px-3 py-1 text-xs font-semibold uppercase text-white/50 mt-2">Suggestions</p>'),s.slice(0,3).forEach(o=>{a.push(`<a href="${o.url||"#"}" class="block px-3 py-2 hover:bg-white/10 text-body no-underline" role="option">${o.styled_text?o.styled_text:y(o.text)}</a>`)})),a.length?a.join(""):'<p class="px-3 py-4 text-subheading text-sm">No results</p>'}function y(e){if(!e)return"";let t=document.createElement("div");return t.textContent=e,t.innerHTML}function k(e){if(e==null)return"";let t=typeof e=="number"&&e>1e3?e/100:e;return new Intl.NumberFormat(void 0,{style:"currency",currency:window.Shopify?.currency?.active||"EUR"}).format(t)}function T(){let e=document.querySelector("[data-predictive-search]"),t=document.querySelector("[data-predictive-search-input]"),r=document.querySelector("[data-predictive-search-results]"),s=document.querySelector("[data-predictive-search-results-inner]");if(!e||!t||!r||!s)return;let a,o=null;t.addEventListener("input",()=>{clearTimeout(a);let n=(t.value||"").trim();if(n.length<2){r.classList.add("hidden"),t.setAttribute("aria-expanded","false");return}a=setTimeout(()=>i(n),200)}),t.addEventListener("focus",()=>{(t.value||"").trim().length>=2&&s.innerHTML&&(r.classList.remove("hidden"),t.setAttribute("aria-expanded","true"))}),t.addEventListener("blur",()=>{setTimeout(()=>{r.classList.add("hidden"),t.setAttribute("aria-expanded","false")},150)}),t.addEventListener("keydown",n=>{n.key==="Escape"&&(r.classList.add("hidden"),t.setAttribute("aria-expanded","false"))});function i(n){o&&o.abort(),o=new AbortController;let l=`${q()}search/suggest.json?q=${encodeURIComponent(n)}&resources[type]=product,page,query&resources[limit]=6&resources[options][unavailable_products]=hide`;fetch(l,{signal:o.signal}).then(d=>d.json()).then(d=>{let u=A(d.resources);s.innerHTML=u,r.classList.remove("hidden"),t.setAttribute("aria-expanded","true")}).catch(d=>{d.name!=="AbortError"&&(s.innerHTML='<p class="px-3 py-4 text-subheading text-sm">Search unavailable</p>')})}}var S={init:T};document.addEventListener("DOMContentLoaded",()=>{b.init(),v.init(),w.init(),E.init(),S.init(),h.init(),f.init(),x.init(),m.init(),p.init(),g.init(),L.init()});})();
