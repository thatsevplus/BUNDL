(()=>{var y={drawer:null,overlay:null,init(){this.drawer=document.getElementById("cart-drawer"),this.overlay=document.getElementById("cart-drawer-overlay"),this.drawer&&(document.querySelectorAll("[data-cart-toggle]").forEach(e=>{e.addEventListener("click",r=>{r.preventDefault(),this.open()})}),this.overlay?.addEventListener("click",()=>this.close()),this.drawer.querySelector("[data-cart-close]")?.addEventListener("click",()=>this.close()),document.addEventListener("keydown",e=>{e.key==="Escape"&&this.isOpen()&&this.close()}),document.addEventListener("submit",e=>{let r=e.target.closest('form[action*="/cart/add"]');r&&(e.preventDefault(),this.addToCart(r))}),this.drawer.addEventListener("click",e=>{let r=e.target.closest("[data-cart-qty]");if(r){e.preventDefault();let t=r.dataset.lineKey,s=r.dataset.cartQty,c=this.drawer.querySelector(`[data-qty-input="${t}"]`),i=parseInt(c?.value||"1",10);s==="plus"&&i++,s==="minus"&&(i=Math.max(0,i-1)),this.updateLine(t,i)}}))},isOpen(){return this.drawer?.classList.contains("translate-x-0")},open(){this.drawer.classList.remove("translate-x-full"),this.drawer.classList.add("translate-x-0"),this.overlay.classList.remove("hidden"),document.documentElement.style.overflow="hidden",this.drawer.querySelector("[data-cart-close]")?.focus()},close(){this.drawer.classList.add("translate-x-full"),this.drawer.classList.remove("translate-x-0"),this.overlay.classList.add("hidden"),document.documentElement.style.overflow=""},async addToCart(e){let r=new FormData(e),t=e.querySelector('[type="submit"]');t&&(t.disabled=!0,t.textContent="Adding\u2026");try{if(!(await fetch("/cart/add.js",{method:"POST",body:r})).ok)throw new Error("Add to cart failed");await this.refreshDrawer(),this.open()}catch(s){console.error("[GINGR Cart]",s)}finally{t&&(t.disabled=!1,t.textContent="Add")}},async updateLine(e,r){try{if(!(await fetch("/cart/change.js",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e,quantity:r})})).ok)throw new Error("Update failed");await this.refreshDrawer()}catch(t){console.error("[GINGR Cart]",t)}},async refreshDrawer(){try{let r=await(await fetch("/?section_id=cart-drawer")).text(),t=new DOMParser().parseFromString(r,"text/html"),s=t.querySelector("#cart-drawer-content");s&&(this.drawer.querySelector("#cart-drawer-content").innerHTML=s.innerHTML);let c=t.querySelector("#cart-drawer .border-t.border-white\\/10"),i=this.drawer.querySelector(".border-t.border-white\\/10:last-child");c&&i&&(i.innerHTML=c.innerHTML),t.querySelectorAll("[data-cart-count]").forEach(n=>{let a=n.textContent.trim();document.querySelectorAll("[data-cart-count]").forEach(l=>{l.textContent=a,l.classList.toggle("hidden",a===""||a==="0")})})}catch(e){console.error("[GINGR Cart refresh]",e)}}};var f={init(){document.querySelectorAll("[data-bundle-selector]").forEach(e=>{this.setup(e)})},setup(e){let r=e.querySelectorAll("[data-bundle-option]"),t=e.closest("form")?.querySelector('select[name="id"], input[name="id"]'),s=document.querySelector("[data-bundle-price]"),c=document.querySelector("[data-bundle-savings]"),i=document.querySelector("[data-bundle-unit-price]");r.forEach(o=>{o.addEventListener("click",()=>{r.forEach(a=>{a.classList.remove("bg-gingr-navy","text-white","ring-2","ring-gingr-navy"),a.classList.add("bg-white","text-gingr-navy")}),o.classList.add("bg-gingr-navy","text-white","ring-2","ring-gingr-navy"),o.classList.remove("bg-white","text-gingr-navy");let n=o.dataset.variantId;if(t&&(t.tagName,t.value=n,t.dispatchEvent(new Event("change",{bubbles:!0}))),s&&(s.textContent=o.dataset.price),c){let a=o.dataset.savings;c.textContent=a&&a!=="0"?`Save ${a}%`:"",c.classList.toggle("hidden",!a||a==="0")}i&&o.dataset.unitPrice&&(i.textContent=o.dataset.unitPrice)})})}};var h={init(){document.querySelectorAll("[data-sub-builder]").forEach(e=>{let r=e.querySelector('[data-purchase-type="onetime"]'),t=e.querySelector('[data-purchase-type="subscribe"]'),s=e.querySelector("[data-frequency-panel]"),c=e.querySelectorAll("[data-frequency-option]");if(!r||!t)return;let i=o=>{o==="subscribe"?(t.classList.add("border-gingr-yellow","bg-gingr-yellow/10","text-gingr-yellow"),t.classList.remove("border-white/10","text-white/50"),r.classList.remove("border-gingr-yellow","bg-gingr-yellow/10","text-gingr-yellow"),r.classList.add("border-white/10","text-white/50"),s&&(s.style.display="")):(r.classList.add("border-gingr-yellow","bg-gingr-yellow/10","text-gingr-yellow"),r.classList.remove("border-white/10","text-white/50"),t.classList.remove("border-gingr-yellow","bg-gingr-yellow/10","text-gingr-yellow"),t.classList.add("border-white/10","text-white/50"),s&&(s.style.display="none"))};r.addEventListener("click",()=>i("onetime")),t.addEventListener("click",()=>i("subscribe")),c.forEach(o=>{o.addEventListener("click",()=>{c.forEach(a=>{a.classList.remove("border-gingr-yellow","bg-gingr-yellow/5"),a.classList.add("border-white/10");let l=a.querySelector("[data-frequency-radio]");l&&(l.classList.remove("border-gingr-yellow"),l.classList.add("border-white/20"),l.innerHTML="")}),o.classList.add("border-gingr-yellow","bg-gingr-yellow/5"),o.classList.remove("border-white/10");let n=o.querySelector("[data-frequency-radio]");n&&(n.classList.add("border-gingr-yellow"),n.classList.remove("border-white/20"),n.innerHTML='<div class="w-2 h-2 rounded-full bg-gingr-yellow"></div>')})})})}};var m={init(){this.setupFocusVisible()},setupFocusVisible(){document.addEventListener("keydown",e=>{e.key==="Tab"&&document.body.classList.add("keyboard-nav")}),document.addEventListener("mousedown",()=>{document.body.classList.remove("keyboard-nav")})},trapFocus(e){let r=e.querySelectorAll('a[href], button:not([disabled]), input:not([disabled]), select:not([disabled]), textarea:not([disabled]), [tabindex]:not([tabindex="-1"])');if(r.length===0)return;let t=r[0],s=r[r.length-1];function c(i){i.key==="Tab"&&(i.shiftKey?document.activeElement===t&&(i.preventDefault(),s.focus()):document.activeElement===s&&(i.preventDefault(),t.focus()))}return e.addEventListener("keydown",c),t.focus(),()=>e.removeEventListener("keydown",c)}};var g={init(){document.querySelectorAll("[data-product-carousel]").forEach(e=>{this.setup(e)})},setup(e){let r=e.querySelector("[data-carousel-track]"),t=e.querySelectorAll(".carousel-slide"),s=e.querySelector("[data-carousel-prev]"),c=e.querySelector("[data-carousel-next]"),i=e.querySelectorAll("[data-carousel-dot]"),o=0;if(!r||t.length===0)return;let n=d=>{let u=t[0].offsetWidth+24;r.scrollTo({left:u*d,behavior:"smooth"})},a=()=>{i.forEach((d,u)=>{u===o?(d.classList.add("bg-gingr-navy","w-6"),d.classList.remove("bg-gingr-navy/20","w-2")):(d.classList.remove("bg-gingr-navy","w-6"),d.classList.add("bg-gingr-navy/20","w-2"))})};s?.addEventListener("click",()=>{o=Math.max(0,o-1),n(o),a()}),c?.addEventListener("click",()=>{o=Math.min(t.length-1,o+1),n(o),a()}),i.forEach(d=>{d.addEventListener("click",()=>{o=parseInt(d.dataset.carouselDot,10),n(o),a()})});let l=null;r.addEventListener("scroll",()=>{clearTimeout(l),l=setTimeout(()=>{let d=t[0].offsetWidth+24,u=Math.round(r.scrollLeft/d);u!==o&&(o=u,a())},100)},{passive:!0})}};var b={init(){let e=document.querySelector("[data-header]");if(!e)return;let r=50,t=!1,s=()=>{window.scrollY>r?e.classList.add("is-scrolled"):e.classList.remove("is-scrolled"),t=!1};window.addEventListener("scroll",()=>{t||(requestAnimationFrame(s),t=!0)},{passive:!0}),s()}};var v={init(){document.querySelectorAll("[data-info-tabs]").forEach(e=>{let r=e.querySelectorAll("[data-tab-trigger]"),t=e.querySelectorAll("[data-tab-panel]");if(!r.length||!t.length)return;let s=0,c=n=>{n.style.backgroundColor=n.dataset.tabActiveBg,n.style.color=n.dataset.tabActiveText},i=n=>{n.style.backgroundColor=n.dataset.tabInactiveBg,n.style.color=n.dataset.tabInactiveText},o=n=>{if(n===s)return;i(r[s]),r[s].setAttribute("aria-selected","false");let a=t[s];a.classList.add("hidden"),a.classList.remove("block","opacity-100","translate-y-0"),c(r[n]),r[n].setAttribute("aria-selected","true");let l=t[n];l.classList.remove("hidden"),l.classList.add("opacity-0","translate-y-4"),requestAnimationFrame(()=>{requestAnimationFrame(()=>{l.classList.remove("opacity-0","translate-y-4"),l.classList.add("opacity-100","translate-y-0")})}),s=n};r.forEach(n=>{n.addEventListener("click",()=>{let a=parseInt(n.getAttribute("data-tab-trigger"),10);o(a)})})})}};var w={init(){document.querySelectorAll("[data-bundle-select]").forEach(e=>{let r=e.querySelector("[data-bundle-select-toggle]"),t=e.querySelector("[data-bundle-select-dropdown]"),s=e.querySelector("[data-bundle-select-chevron]"),c=e.querySelector("[data-bundle-select-label]"),i=e.querySelectorAll("[data-bundle-option]");!r||!t||(r.addEventListener("click",o=>{o.stopPropagation();let n=!t.classList.contains("hidden");if(document.querySelectorAll("[data-bundle-product]").forEach(a=>{a.style.zIndex=""}),document.querySelectorAll("[data-bundle-select-dropdown]").forEach(a=>{a.classList.add("hidden")}),document.querySelectorAll("[data-bundle-select-chevron]").forEach(a=>{a.style.transform=""}),n)r.setAttribute("aria-expanded","false");else{let a=e.closest("[data-bundle-product]");a&&(a.style.zIndex="40"),t.classList.remove("hidden"),s&&(s.style.transform="rotate(180deg)"),r.setAttribute("aria-expanded","true")}}),i.forEach(o=>{o.addEventListener("click",()=>{let n=o.getAttribute("data-amount");c&&(c.textContent="Pack "+n),t.classList.add("hidden"),s&&(s.style.transform=""),r.setAttribute("aria-expanded","false"),i.forEach(a=>a.classList.remove("bg-white/10")),o.classList.add("bg-white/10")})}))}),document.addEventListener("click",()=>{document.querySelectorAll("[data-bundle-product]").forEach(e=>{e.style.zIndex=""}),document.querySelectorAll("[data-bundle-select-dropdown]").forEach(e=>{e.classList.add("hidden")}),document.querySelectorAll("[data-bundle-select-chevron]").forEach(e=>{e.style.transform=""})})}};var p={init(){let e=document.querySelector("[data-mobile-menu-toggle]"),r=document.querySelector("[data-mobile-menu-close]"),t=document.querySelector("[data-mobile-menu]");if(!t)return;let s=()=>{t.classList.remove("hidden"),t.classList.add("flex"),document.body.style.overflow="hidden",e&&e.setAttribute("aria-expanded","true")},c=()=>{t.classList.add("hidden"),t.classList.remove("flex"),document.body.style.overflow="",e&&e.setAttribute("aria-expanded","false")};e&&e.addEventListener("click",s),r&&r.addEventListener("click",c),t.querySelectorAll("a").forEach(i=>{i.addEventListener("click",c)}),document.addEventListener("keydown",i=>{i.key==="Escape"&&!t.classList.contains("hidden")&&c()})}};document.addEventListener("DOMContentLoaded",()=>{b.init(),p.init(),y.init(),f.init(),w.init(),h.init(),m.init(),g.init(),v.init()});})();
